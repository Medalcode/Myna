<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hermes | Data Mining</title>
    <link rel="stylesheet" href="/static/css/style.css" />
    <!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="app-container">
      <!-- Sidebar / Navigation -->
      <nav class="sidebar">
        <div class="logo">
          <h1> Hermes</h1>
        </div>
        <ul class="nav-links">
          <li class="active" onclick="showTab('upload')"> Carga</li>
          <li onclick="showTab('clean')">Ч Limpieza</li>
          <li onclick="showTab('stats')"> Estad铆sticas</li>
          <li onclick="showTab('cluster')"> Clustering</li>
          <li onclick="showTab('plot')"> Visualizaci贸n</li>
        </ul>
      </nav>

      <!-- Main Content -->
      <main class="content">
        <!-- TAB: UPLOAD -->
        <section id="upload" class="tab-content active">
          <h2>Cargar Datos</h2>
          <div class="card">
            <form id="uploadForm">
              <label class="file-upload">
                <input
                  type="file"
                  id="fileInput"
                  name="file"
                  accept=".csv, .xlsx"
                />
                <span>Seleccionar Archivo</span>
              </label>
              <select id="delimiter" name="delimiter">
                <option value=",">Sep: Coma (,)</option>
                <option value=";">Sep: Punto y Coma (;)</option>
              </select>
              <button type="submit" class="btn-primary">Cargar</button>
            </form>
          </div>
          <div id="uploadStatus" class="status-msg"></div>
          <div class="preview-container">
            <h3>Vista Previa</h3>
            <div class="table-wrapper" id="uploadPreview"></div>
          </div>
        </section>

        <!-- TAB: CLEAN -->
        <section id="clean" class="tab-content">
          <h2>Limpieza y Preprocesamiento</h2>
          <div class="grid-2">
            <div class="card">
              <h3>Tratar Nulos</h3>
              <select
                id="nullCols"
                multiple
                class="multi-select"
                placeholder="Seleccionar columnas"
              ></select>
              <select id="nullMethod">
                <option value="Eliminar filas">Eliminar filas</option>
                <option value="Llenar con promedio">Llenar con promedio</option>
                <option value="Llenar con mediana (Mejora 5)">
                  Llenar con mediana
                </option>
                <option value="Llenar con cero">Llenar con cero</option>
              </select>
              <button onclick="cleanNulls()" class="btn-secondary">
                Aplicar Limpieza
              </button>
            </div>
            <div class="card">
              <h3>Escalado</h3>
              <select id="scaleCols" multiple class="multi-select"></select>
              <select id="scaleMethod">
                <option value="Min-Max">Min-Max</option>
                <option value="Z-Score">Z-Score</option>
              </select>
              <button onclick="scaleData()" class="btn-secondary">
                Aplicar Escalado
              </button>
            </div>
          </div>
          <div id="cleanStatus" class="status-msg"></div>
        </section>

        <!-- TAB: STATS -->
        <section id="stats" class="tab-content">
          <h2>An谩lisis Estad铆stico</h2>
          <button onclick="loadStats()" class="btn-primary">
            Actualizar Estad铆sticas
          </button>
          <div class="stats-output" id="statsOutput">
            <!-- Markdown content will go here -->
          </div>
        </section>

        <!-- TAB: CLUSTER -->
        <section id="cluster" class="tab-content">
          <h2>Clustering (K-Means)</h2>
          <div class="card">
            <label>Variables:</label>
            <select id="clusterCols" multiple class="multi-select"></select>
            <label>K (Clusters): <span id="kValue">3</span></label>
            <input
              type="range"
              id="kSlider"
              min="2"
              max="10"
              value="3"
              oninput="document.getElementById('kValue').innerText = this.value"
            />
            <button onclick="runCluster()" class="btn-primary">Ejecutar</button>
          </div>
          <div id="clusterStatus" class="status-msg"></div>
          <!-- Cluster Plot Placeholder -->
        </section>

        <!-- TAB: PLOT -->
        <section id="plot" class="tab-content">
          <h2>Visualizaci贸n Interactiva</h2>
          <div class="controls-bar">
            <select id="plotType" onchange="updatePlotInputs()">
              <option value="correlation">Correlaci贸n (Heatmap)</option>
              <option value="distribution">Distribuci贸n</option>
              <option value="regression">Regresi贸n</option>
              <option value="cluster">Ver Clusters</option>
            </select>

            <!-- Dynamic Inputs -->
            <select
              id="plotCol"
              style="display: none"
              placeholder="Columna"
            ></select>
            <select
              id="plotX"
              style="display: none"
              placeholder="Eje X"
            ></select>
            <select
              id="plotY"
              style="display: none"
              placeholder="Eje Y"
            ></select>

            <button onclick="generatePlot()" class="btn-primary">
              Generar Gr谩fico
            </button>
          </div>
          <div id="mainPlot" class="plot-container"></div>
        </section>
      </main>
    </div>
    <script src="/static/js/app.js"></script>
  </body>
</html>
